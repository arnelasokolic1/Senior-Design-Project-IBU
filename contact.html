<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Form</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* Global Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
    }

    body {
      background: #fdfdfd;
      color: #333;
    }

    /* Navbar */
    .navbar {
      background: linear-gradient(to left, #181A2F, #242E49, #37415C);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      padding: 0.8rem 2rem;
    }

    .navbar .navbar-brand,
    .navbar .nav-link {
      color: #fff !important;
      font-size: 18px;
      font-weight: 500;
      letter-spacing: 0.5px;
      transition: color 0.3s;
    }

    .navbar .nav-link:hover {
      color: #bb1f5d !important;
    }

    /* Contact Section */
    section {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 50px 20px;
      background: #ffffff;
    }

    .contact-wrapper {
      display: flex;
      flex-wrap: wrap;
      max-width: 1100px;
      width: 100%;
      background: #fff;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }

    /* Contact Info */
    .contactInfo {
      background: #bb1f5d;
      flex: 1;
      min-width: 300px;
      padding: 60px 30px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
      text-align: center;
    }

    .contactInfo h2 {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .contactInfo p {
      font-size: 18px;
      margin: 5px 0;
    }

    /* Contact Form */
    .contactForm {
      flex: 2;
      padding: 60px 50px;
      background: #fff;
    }

    .contactForm h2 {
      color: #0f3959;
      font-size: 26px;
      font-weight: 600;
      margin-bottom: 20px;
    }

    .formBox {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .inputBox {
      position: relative;
      flex: 1;
      min-width: 47%;
    }

    .inputBox.w100 {
      flex: 100%;
    }

    .inputBox input,
    .inputBox textarea {
      width: 100%;
      padding: 12px 10px;
      border: none;
      border-bottom: 2px solid #aaa;
      font-size: 16px;
      outline: none;
      background: transparent;
      transition: 0.3s;
    }

    .inputBox span {
      position: absolute;
      left: 10px;
      top: 10px;
      font-size: 16px;
      color: #777;
      pointer-events: none;
      transition: 0.3s ease;
    }

    .inputBox input:focus~span,
    .inputBox input:valid~span,
    .inputBox textarea:focus~span,
    .inputBox textarea:valid~span {
      top: -15px;
      left: 5px;
      font-size: 13px;
      font-weight: 600;
      color: #bb1f5d;
    }

    .inputBox input:focus,
    .inputBox textarea:focus {
      border-bottom: 2px solid #bb1f5d;
    }

    textarea {
      min-height: 120px;
      resize: none;
    }

    /* Submit Button */
    .inputBox input[type="submit"] {
      background: linear-gradient(to right, #04286b, #041f52);
      color: #fff;
      border-radius: 8px;
      padding: 14px;
      border: none;
      font-weight: 600;
      font-size: 16px;
      letter-spacing: 1px;
      cursor: pointer;
      transition: 0.3s ease;
      width: 100%;
    }

    .inputBox input[type="submit"]:hover {
      background: #bb1f5d;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
    }

    /* Responsive */
    @media (max-width: 992px) {
      .contact-wrapper {
        flex-direction: column;
      }

      .contactInfo,
      .contactForm {
        flex: 100%;
        max-width: 100%;
        border-radius: 0;
      }

      .inputBox {
        min-width: 100%;
      }
    }
  </style>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="home_page.html">BlockLearn</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="home_page.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html">About the Quiz</a></li>
          <li class="nav-item"><a class="nav-link" href="faq.html">FAQ</a></li>
          <li class="nav-item"><a class="nav-link active" href="contact.html">Contact Us</a></li>
          <li class="nav-item"><a class="nav-link" href="fill_in_blanks.html">Fill In The Blanks</a></li>
          <li class="nav-item"><a class="nav-link" href="learn_with_us.html">Learn with Us</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Contact Section -->
  <section>
    <div class="contact-wrapper">
      <div class="contactInfo">
        <h2>Contact Us</h2>
        <p>Arnela SokoliÄ‡</p>
        <p>arnela.sokolic@stu.ibu.edu.ba</p>
      </div>

      <div class="contactForm">
        <h2>Send a Message</h2>
        <form class="formBox">
          <div class="inputBox">
            <input type="text" id="firstName" required>
            <span>First Name</span>
          </div>
          <div class="inputBox">
            <input type="text" id="lastName" required>
            <span>Last Name</span>
          </div>
          <div class="inputBox">
            <input type="email" id="email" required>
            <span>Email</span>
          </div>
          <div class="inputBox">
            <input type="text" id="mobile" required>
            <span>Mobile Number</span>
          </div>
          <div class="inputBox w100">
            <textarea id="message" required></textarea>
            <span>Write your message here...</span>
          </div>
          <div class="inputBox w100">
            <input type="submit" value="Submit" id="submitMessage">
          </div>
        </form>
      </div>
    </div>
  </section>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script>
        // Check if MetaMask is installed
        if (typeof window.ethereum === 'undefined') {
            alert("MetaMask is not installed. Please install MetaMask to interact with the app.");
        } else {
            const web3 = new Web3(window.ethereum);
            const contractAddress = "0x6Bc3ce3D718808Dffa6C3A9dFC17d4f090A1a399"; 
            const abi = [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "email",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "message",
				"type": "string"
			}
		],
		"name": "ContactMessageReceived",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			}
		],
		"name": "ContactMessageRemoved",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "questionText",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string[]",
				"name": "options",
				"type": "string[]"
			}
		],
		"name": "QuestionAdded",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "id",
				"type": "uint256"
			}
		],
		"name": "QuestionRemoved",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "user",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "score",
				"type": "uint256"
			}
		],
		"name": "QuizAttempted",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_questionText",
				"type": "string"
			},
			{
				"internalType": "string[]",
				"name": "_options",
				"type": "string[]"
			},
			{
				"internalType": "uint256",
				"name": "_correctAnswer",
				"type": "uint256"
			}
		],
		"name": "addQuestion",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "admin",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_score",
				"type": "uint256"
			}
		],
		"name": "attemptQuiz",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "contactMessages",
		"outputs": [
			{
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "email",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "message",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_id",
				"type": "uint256"
			}
		],
		"name": "getContactMessage",
		"outputs": [
			{
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "email",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "message",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getContactMessageCount",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_id",
				"type": "uint256"
			}
		],
		"name": "getQuestion",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string[]",
				"name": "",
				"type": "string[]"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getQuestionCount",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_user",
				"type": "address"
			}
		],
		"name": "getUserScore",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "hasAttemptedQuiz",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "questions",
		"outputs": [
			{
				"internalType": "string",
				"name": "questionText",
				"type": "string"
			},
			{
				"internalType": "uint256",
				"name": "correctAnswer",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_id",
				"type": "uint256"
			}
		],
		"name": "removeContactMessage",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_id",
				"type": "uint256"
			}
		],
		"name": "removeQuestion",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_email",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_message",
				"type": "string"
			}
		],
		"name": "submitContactMessage",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_user",
				"type": "address"
			}
		],
		"name": "userHasAttempted",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "userScores",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];
            const contract = new web3.eth.Contract(abi, contractAddress);

            // Connect to MetaMask
            async function connectMetaMask() {
                try {
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const accounts = await web3.eth.getAccounts();
                    return accounts[0];
                } catch (error) {
                    alert("User denied account access");
                }
            }


    async function submitContactMessage() {
    const firstName = document.getElementById('firstName').value;
    const lastName = document.getElementById('lastName').value;
    const email = document.getElementById('email').value;
    const mobile = document.getElementById('mobile').value;
    const message = document.getElementById('message').value;

    const userAddress = await connectMetaMask();

    if (userAddress) {
        contract.methods.submitContactMessage(firstName, email, message).send({ from: userAddress })
            .on('receipt', function (receipt) {
                console.log('Transaction receipt:', receipt);
                alert('Message sent successfully!');
            })
            .on('error', function (error) {
                console.error('Error:', error);
                alert('Error sending message.');
            });
    }
}


            
            async function loadMessages() {
                const messages = await contract.methods.getMessages().call();
                const messagesList = document.getElementById("messagesList");
                messagesList.innerHTML = ''; // Clear existing messages

                messages.forEach((message, index) => {
                    const messageItem = document.createElement("div");
                    messageItem.classList.add("message");
                    messageItem.innerHTML = `
                        <strong>${message.name}</strong><br>
                        <em>${message.email}</em><br>
                        <p>${message.message}</p>
                        <button onclick="deleteMessage(${index})">Delete</button>
                    `;
                    messagesList.appendChild(messageItem);
                });
            }

       // Delete a message
    async function deleteMessage(index) {
    const userAddress = await connectMetaMask();
    if (userAddress) {
        contract.methods.deleteMessage(index).send({ from: userAddress })
            .on('receipt', function (receipt) {
                console.log('Message deleted:', receipt);
                loadMessages(); 
            })
            .on('error', function (error) {
                console.error('Error deleting message:', error);
            });
    }
}
            // Add event listener to the submit button
            document.getElementById('submitMessage').addEventListener('click', function (event) {
                event.preventDefault();
                submitContactMessage();
            });

            // Load messages on page load
            loadMessages();
        }
    </script>
</body>

</html>
